<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="/js/tools/sha1.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    <p>ticket: <span class="ticket"><%= ticket%></span></p>
  </body>
  <script type="text/javascript" charset="utf-8">
  	var timestamp = new Date().getTime(), nonceStr = 'xybao'; 
  	var str = 'noncestr=' + nonceStr + '&jsapi_ticket=' + $('.ticket').text() + '&timestamp=' + timestamp + '&url=' + document.location.href;
  	wx.config({
  		debug: true,
  		appid:'wxba6005f1e61bdfaa',
  		timestamp: timestamp,
  		nonceStr: nonceStr,
  		signature: hex_sha1(str),
  		jsApiList:['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo',
  			'onMenuShareQZone','startRecord','stopRecord','onVoiceRecordEnd','playVoice','pauseVoice',
  			'stopVoice','onVoicePlayEnd','uploadVoice','downloadVoice','chooseImage','previewImage','uploadImage',
  			'downloadImage','translateVoice','getNetworkType','openLocation','getLocation','hideOptionMenu',
  			'showOptionMenu','hideMenuItems','showMenuItems','hideAllNonBaseMenuItem','showAllNonBaseMenuItem',
  			'closeWindow','scanQRCode','chooseWXPay','openProductSpecificView','addCard','chooseCard','openCard']
  	});
  	wx.ready(function(){
		wx.getNetworkType({
		    success: function (res) {
		        var networkType = res.networkType; // 返回网络类型2g，3g，4g，wifi
		        console.log(res);
		    },
		    fail: function(e){
		    	console.log(e);
		    }
		});
  	});
  	wx.error(function(res){
  		alert(res);
  	});
  </script>
</html>
